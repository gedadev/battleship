(()=>{"use strict";var e={890:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(81),i=n.n(r),a=n(645),s=n.n(a)()(i());s.push([e.id,"* {\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n    border: 0;\n    vertical-align: baseline;\n    list-style: none;\n    text-decoration: none;\n}\n\n:root {\n    --ship-color: rgb(206, 232, 210);\n    --font-color: rgb(57, 57, 57);\n    --main-font: 'Mooli', sans-serif;\n}\n\nbody {\n    background-color: #e5e5e5;\n    font-family: var(--main-font);\n    color: var(--font-color);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\nh1 {\n    text-align: center;\n    margin: 30px 0;\n    font-size: 75px;\n    font-family: 'Black Ops One', cursive;\n}\n\nh2 {\n    font-size: 55px;\n    font-family: 'Black Ops One', cursive;\n}\n\n#navbar > ul{\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    gap: 70px;\n    margin: 50px 0 0;   \n}\n\n.nav-item {\n    font-size: 14px;\n    cursor: pointer;\n    transition: text-shadow .5s;\n}\n\n.nav-item:nth-child(2) {\n    font-size: 28px;\n    text-shadow: 0 0 8px rgb(57, 57, 57);\n    font-weight: bolder;\n}\n\n.nav-item:hover {\n    text-shadow: 0 0 10px rgb(173, 173, 173);\n}\n\nmain {\n    margin: auto;\n    display: flex;\n    width: 70%;\n    justify-content: center;\n    align-items: center;\n    gap: 200px;\n}\n\n.board-container {\n    width: 40%;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto;\n    margin-top: 70px;\n    justify-items: center;\n}\n\n.board {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n}\n\n.latitude {\n    grid-column: 2 / 3;\n    display: flex;\n    justify-content: space-around;\n    margin: 3px 0;\n}\n\n.longitude {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    margin: 0 3px;\n}\n\n.grid {\n    display: grid;\n    grid-template-columns: repeat(10, 35px);\n    gap: 1px;\n    background-color: #b4b4b4; \n}\n\n.player {\n    margin: 40px auto;\n    grid-column: 2 / 3;\n}\n\n.player > h3 {\n    text-align: center;\n}\n\n.player > p {\n    margin: 10px auto;\n    font-size: 15px;\n    text-align: center;\n}\n\n.pixel {\n    height: 35px;\n    width: 35px;\n    border: 1px;\n    border-style: solid;\n    border-color: rgb(185, 171, 131);\n}\n\n.hit::after {\n    content: '\\2022';\n    position: relative;\n    top: -8px;\n    left: 7px;\n    color: red;\n    font-size: 40px;\n    text-shadow: 0px 0px 10px red;\n}\n\n.fail::after {\n    content: '\\2022';\n    position: relative;\n    top: -8px;\n    left: 7px;\n    color: gray;\n    font-size: 40px;\n    text-shadow: 0px 0px 10px gray;\n}\n\n.ships-container {\n    padding: 20px 20px;\n}\n\n.ship {\n    display: flex;\n    margin: 10px 0;\n    gap: 1px;\n}\n\n.ship > .pixel {\n    background-color: var(--ship-color);\n    height: 10px;\n    width: 10px;\n}\n",""]);const o=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var d=0;d<e.length;d++){var h=[].concat(e[d]);r&&s[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),t.push(h))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},s=[],o=0;o<e.length;o++){var l=e[o],d=r.base?l[0]+r.base:l[0],h=a[d]||0,c="".concat(d," ").concat(h);a[d]=h+1;var p=n(c),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var f=i(u,r);r.byIndex=o,t.splice(o,0,{identifier:c,updater:f,references:1})}s.push(c)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=n(a[s]);t[o].references--}for(var l=r(e,i),d=0;d<a.length;d++){var h=n(a[d]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}a=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),i=n.n(r),a=n(569),s=n.n(a),o=n(565),l=n.n(o),d=n(216),h=n.n(d),c=n(589),p=n.n(c),u=n(890),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=s().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=h(),t()(u.Z,f),u.Z&&u.Z.locals&&u.Z.locals;class g{constructor(e,t){this.name=e,this.length=t,this.timesHit=0,this.sunk=!1}hit(){this.timesHit+=1,this.isSunk()}isSunk(){this.length===this.timesHit&&(this.sunk=!0)}}class m{constructor(e){this.size=e,this.board=this.generateBoard(),this.totalHits=[],this.ships={}}generateBoard(){return new Array(this.size).fill(null).map((()=>new Array(this.size).fill(null)))}allShipsSunk(){return Object.values(this.ships).reduce(((e,t)=>!(!e||!t.sunk)),!0)}receiveAttack(e,t){for(let n=0;n<this.totalHits.length;n+=1)if(this.totalHits[n][0]===e&&this.totalHits[n][1]===t)return!1;return this.totalHits.push([e,t]),null!==this.board[e][t]&&this.board[e][t].hit(),!0}placeShipAtCoordinate(e,t,n,r){return this.ships[e.name]=e,!(null!==this.board[t][n]||!this.validateRoom(e,t,n,r))}placeShipsRandomly(){this.ships={carrier:new g("carrier",5),battleship:new g("battleship",4),submarine:new g("submarine",3),destroyer:new g("destroyer",3),patrolBoat:new g("patrolBoat",2)},Object.values(this.ships).forEach((e=>{for(;;){const t=Math.floor(Math.random()*(this.size-0)),n=Math.floor(Math.random()*(this.size-0));if(null===this.board[t][n]&&this.validateRoom(e,t,n))break}}))}validateRoom(e,t,n,r=null){if(0===(null===r?Math.floor(2*Math.random()):r)){if(e.length+t<=this.size&&!this.validateVerticalCollisions(e.length,t,n)){for(let r=0;r<e.length;r+=1)this.board[t+r][n]=e;return!0}}else if(e.length+n<=this.size&&!this.validateHorizontalCollisions(e.length,t,n)){for(let r=0;r<e.length;r+=1)this.board[t][n+r]=e;return!0}return!1}validateVerticalCollisions(e,t,n){let r=e,i=0;if(e+t<this.size&&0!==t?(r+=1,i=-1):e+t>=this.size?i-=1:t<=0&&(r+=1),n-1<0){for(;i<r;i+=1)if(null!==this.board[t+i][n]||null!==this.board[t+i][n+1])return!0}else if(n+1>=this.size){for(;i<r;i+=1)if(null!==this.board[t+i][n]||null!==this.board[t+i][n-1])return!0}else for(;i<r;i+=1)if(null!==this.board[t+i][n]||null!==this.board[t+i][n-1]||null!==this.board[t+i][n+1])return!0;return!1}validateHorizontalCollisions(e,t,n){let r=e+1,i=-1;if(n<=0?i=0:e+n>=this.size&&(r-=1),t+1>=this.size){for(;i<r;i+=1)if(null!==this.board[t][n+i]||null!==this.board[t-1][n+i])return!0}else if(t-1<0){for(;i<r;i+=1)if(null!==this.board[t][n+i]||null!==this.board[t+1][n+i])return!0}else for(;i<r;i+=1)if(null!==this.board[t][n+i]||null!==this.board[t-1][n+i]||null!==this.board[t+1][n+i])return!0;return!1}}class y{constructor(e){this.turn=!0,this.gameBoard=new m(10),this.name=e}}class b{constructor(e,t,n){this.gridContainer=e,this.player1=t,this.player2=n,this.players=[this.player1,this.player2],this.grid=[],this.turnIndicator=document.querySelectorAll(".player")}generateGrid(){this.gridContainer.forEach(((e,t)=>{const n=new Array(this.players[t].gameBoard.size).fill(null).map((()=>new Array(this.players[t].gameBoard.size).fill(null)));for(let r=0;r<this.players[t].gameBoard.size;r+=1)for(let i=0;i<this.players[t].gameBoard.size;i+=1){const t=document.createElement("div");t.className="pixel",e.appendChild(t),n[r][i]=t}this.grid.push(n)})),this.gridContainer[0].style.backgroundColor="rgba(0, 0, 0, 0)"}displayShips(e){this.clearGrid(e);for(let t=0;t<this.grid[e].length;t+=1)for(let n=0;n<this.grid[e].length;n+=1)null!==this.players[e].gameBoard.board[t][n]&&(this.grid[e][t][n].style.backgroundColor="var(--ship-color)")}clearGrid(e){for(let t=0;t<this.grid[e].length;t+=1)for(let n=0;n<this.grid[e].length;n+=1)this.grid[e][t][n].style.backgroundColor="rgba(0, 0, 0, 0)"}displayAttack(e,t,n){null!==this.players[n].gameBoard.board[e][t]?this.grid[n][e][t].classList.add("hit"):this.grid[n][e][t].classList.add("fail")}clearHits(e){for(let t=0;t<this.grid[e].length;t+=1)for(let n=0;n<this.grid[e].length;n+=1)this.grid[e][t][n].className="pixel"}displayTurn(e){if(0===e){const t=this.turnIndicator[e].firstElementChild,n=this.turnIndicator[e+1].firstElementChild;t.style.color="#84d794",n.style.color="#e76262"}if(1===e){const t=this.turnIndicator[e-1].firstElementChild,n=this.turnIndicator[e].firstElementChild;t.style.color="#e76262",n.style.color="#84d794"}}}class v{constructor(){this.player1=new y("Player 1"),this.player2=new y("Computer"),this.grid=document.querySelectorAll(".grid"),this.render=new b(this.grid,this.player1,this.player2)}initGame(){this.player1.gameBoard.placeShipsRandomly(),this.player2.gameBoard.placeShipsRandomly(),this.render.generateGrid(),this.render.displayShips(0),this.rearrange(),this.enableOpponentBoard()}rearrange(){document.querySelector("#rearrange-ships").addEventListener("click",(()=>{this.player1.gameBoard.board=this.player1.gameBoard.generateBoard(),this.player1.gameBoard.placeShipsRandomly(),this.render.displayShips(0)}))}resetGame(){this.player1.gameBoard.board=this.player1.gameBoard.generateBoard(),this.player1.gameBoard.totalHits=[],this.player1.gameBoard.placeShipsRandomly(),this.render.displayShips(0),this.render.clearHits(0),this.player2.gameBoard.board=this.player1.gameBoard.generateBoard(),this.player2.gameBoard.totalHits=[],this.player2.gameBoard.placeShipsRandomly(),this.render.clearGrid(1),this.render.clearHits(1),this.render.gridContainer[1].style.backgroundColor="#b4b4b4",this.rearrange(),this.enableOpponentBoard(),document.body.children[4].remove(),document.body.children[3].remove()}declareWinner(e,t,n){if(t.gameBoard.allShipsSunk()){this.render.displayShips(1);const t=document.createElement("h2"),r=document.createElement("p");return t.innerText=`${e.name} wins`,r.innerText="Press any key to continue",document.body.appendChild(t),document.body.appendChild(r),v.disableListeners(n),!0}return!1}static disableListeners(e){for(let t=0;t<e.length;t+=1){const n=e[t].cloneNode(!0);e[t].parentNode.replaceChild(n,e[t])}}enableOpponentBoard(){document.querySelector("#start-game").addEventListener("click",(()=>{const e=document.querySelector("#navbar").firstElementChild.children;v.disableListeners(e),this.player1.turn=!0,this.player2.turn=!1,this.render.gridContainer[1].style.backgroundColor="rgba(0,0,0,0)",this.render.displayTurn(0);const t=this.render.gridContainer[1].children;for(let e=0;e<t.length;e+=1)t[e].addEventListener("click",(async()=>{const n=e.toString().split("").map(Number);if(n.length<2&&n.unshift(0),this.player1.turn&&this.player2.gameBoard.receiveAttack(n[0],n[1])&&(this.render.displayAttack(n[0],n[1],1),this.player1.turn=!1,this.player2.turn=!0,this.render.displayTurn(1),this.declareWinner(this.player1,this.player2,t))){const e=this.render.grid[1];return this.render.grid[1]=v.updateOpponentGrid(t,e),void document.addEventListener("keydown",this.resetGame.bind(this),{once:!0})}await this.computerMove()}))}))}static updateOpponentGrid(e,t){let n=0;for(;n<e.length;)for(let r=0;r<t.length;r+=1)for(let i=0;i<t.length;i+=1)t[r][i]=e[n],n+=1;return t}computerMove(){return new Promise((()=>{setTimeout((()=>{if(this.player2.turn)for(;;){const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());if(this.player1.gameBoard.receiveAttack(e,t)){this.render.displayAttack(e,t,0),this.player1.turn=!0,this.player2.turn=!1,this.render.displayTurn(0);const n=this.render.gridContainer[1].children;if(this.declareWinner(this.player1,this.player2,n)){const e=this.render.grid[1];return this.render.grid[1]=v.updateOpponentGrid(n,e),void document.addEventListener("keydown",this.resetGame.bind(this),{once:!0})}break}}}),1e3)}))}}(new v).initGame()})()})();